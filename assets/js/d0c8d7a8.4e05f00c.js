"use strict";(self.webpackChunkdocs_api=self.webpackChunkdocs_api||[]).push([[89591],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),m=p(n),d=o,h=m["".concat(s,".").concat(d)]||m[d]||u[d]||i;return n?a.createElement(h,l(l({ref:t},c),{},{components:n})):a.createElement(h,l({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,l=new Array(i);l[0]=d;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[m]="string"==typeof e?e:o,l[1]=r;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},19798:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>p});var a=n(87462),o=(n(67294),n(3905));const i={sidebar_label:"Pages, Components and Templates",sidebar_position:2},l="Pages, Components and Templates",r={unversionedId:"fmc/pages-components-templates",id:"fmc/pages-components-templates",title:"Pages, Components and Templates",description:"The FMC Framework relies on three main concepts to arrange different pages and units of information laid out on those pages.",source:"@site/docs/fmc/pages-components-templates.md",sourceDirName:"fmc",slug:"/fmc/pages-components-templates",permalink:"/msfs-avionics-mirror/docs/fmc/pages-components-templates",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"Pages, Components and Templates",sidebar_position:2},sidebar:"sidebar",previous:{title:"Intro to the FMC Framework",permalink:"/msfs-avionics-mirror/docs/fmc/intro-to-the-fmc-framework"},next:{title:"Setting up an FMC Screen",permalink:"/msfs-avionics-mirror/docs/fmc/setting-up-an-fmc-screen"}},s={},p=[{value:"Page",id:"page",level:2},{value:"Component",id:"component",level:2},{value:"Types of components natively supported by the FMC Framework",id:"types-of-components-natively-supported-by-the-fmc-framework",level:3},{value:"Template",id:"template",level:2},{value:"Template rows",id:"template-rows",level:3},{value:"Positioned columns",id:"positioned-columns",level:4},{value:"Left/Right/Center fixed columns",id:"leftrightcenter-fixed-columns",level:4},{value:"A mix of both",id:"a-mix-of-both",level:4},{value:"Template columns",id:"template-columns",level:3},{value:"Template sub pages",id:"template-sub-pages",level:2}],c={toc:p},m="wrapper";function u(e){let{components:t,...i}=e;return(0,o.kt)(m,(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"pages-components-and-templates"},"Pages, Components and Templates"),(0,o.kt)("p",null,"The FMC Framework relies on three main concepts to arrange different pages and units of information laid out on those pages."),(0,o.kt)("h2",{id:"page"},"Page"),(0,o.kt)("p",null,"A page is a singular view which can be displayed on a CDU screen. All cases studied in the development on this framework can only render one page at a time, with most unusual examples optionally rendering overlays on a single page."),(0,o.kt)("p",null,"In the FMC Framework, a page is represented by a single JavaScript class extending an implementation-specific class (which itself extends ",(0,o.kt)("inlineCode",{parentName:"p"},"AbstractFmcPage"),")."),(0,o.kt)("p",null,"This class takes care of:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"rendering content;"),(0,o.kt)("li",{parentName:"ul"},"(optionally) handling events such as button presses;"),(0,o.kt)("li",{parentName:"ul"},"managing any components present on the page;"),(0,o.kt)("li",{parentName:"ul"},"managing the lifecycle of any ",(0,o.kt)("a",{parentName:"li",href:"/docs/subscriptions/intro-to-subscriptions"},(0,o.kt)("inlineCode",{parentName:"a"},"Subscriptions"))," the page relies on;"),(0,o.kt)("li",{parentName:"ul"},"connecting to any external components which provide data for the page.")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"For one given page in a single FMC Screen, only one instance of the page class associated with it exists at any given time. It is possible to tweak when those instances are created - see the ",(0,o.kt)("a",{parentName:"p",href:"/docs/fmc/page-lifecycle"},"Page Lifecycle documentation"),".")),(0,o.kt)("h2",{id:"component"},"Component"),(0,o.kt)("p",null,"A component is an object which handles both rendering and processing of relevant events, in the context of a distinct piece of a page UI, according to a particular set of developer-defined logic. They allow moving the rendering and event handling logic from the page-level to a more individual level."),(0,o.kt)("p",null,"Using components has two main advantages:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"it allows isolating different parts of a page's contents from each-other, both in rendering and handling of user interaction;"),(0,o.kt)("li",{parentName:"ul"},"it provides a powerful framework for encapsulating and re-using behavior across multiple parts of the FMC Screen.")),(0,o.kt)("p",null,"Additionally, some component classes provided in the SDK provide built-in data binding facilities that allow both binding the data the component is ",(0,o.kt)("em",{parentName:"p"},"rendering"),", and potentially transforming user input into new values for bound data. The two-way aspect of this data binding system is very highly customisable, allows for very easy ejection from default behavior and has been successfully used to build extremely demanding CDU UIs in ",(0,o.kt)("em",{parentName:"p"},"Microsoft Flight Simulator"),"."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"When rendering highly dynamic UIs with challenging layout requirements, the usage of components can be more difficult. As there is currently no way to destroy components (other than via the page being collected by GC), ",(0,o.kt)("strong",{parentName:"p"},"creating them at any other time than when the page is instantiated creates a memory leak"),"."),(0,o.kt)("p",{parentName:"admonition"},"It is therefore recommended to manually render templates (see the section below) when the complexity of a UI exceeds what components are designed for. However, it is still possible to develop most commonly present CDU UIs using components.")),(0,o.kt)("h3",{id:"types-of-components-natively-supported-by-the-fmc-framework"},"Types of components natively supported by the FMC Framework"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Display fields - these components allow rendering a value, with no user inputs handled by default."),(0,o.kt)("li",{parentName:"ul"},"Editable fields - these components allow both rendering a value and changing its state using user inputs."),(0,o.kt)("li",{parentName:"ul"},"Text input fields - these components extend editable fields and provide parsing of text typed in by the user.")),(0,o.kt)("h2",{id:"template"},"Template"),(0,o.kt)("p",null,"A ",(0,o.kt)("em",{parentName:"p"},"template")," is the output of the ",(0,o.kt)("inlineCode",{parentName:"p"},"render()")," method of an FMC page class. The template output dictates the layout of characters on a page, all fitted to lay on the CDU screen grid."),(0,o.kt)("p",null,"Template processing in the FMC Framework includes utilities and shortcuts that make creating page UIs easier."),(0,o.kt)("p",null,"Here is an example of a real page, and how a template would be written for it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'[\n  // The root array of the template contains all the grid rows in the page.\n  ["MENU"], // Each row can contain varying columns. See the section below.\n  [""],\n  ["<PAGE A", "PAGE B>"],\n  [""],\n  ["<PAGE C", "PAGE D>"],\n  [""], // v-- Each column can be one of three types of values. See the section below.\n  ["<PAGE E", this.Component],\n];\n')),(0,o.kt)("h3",{id:"template-rows"},"Template rows"),(0,o.kt)("p",null,"A template row is a row that will eventually be placed on the character grid. It can contain a varying number of columns, depending on the type of layout you choose to use:"),(0,o.kt)("h4",{id:"positioned-columns"},"Positioned columns"),(0,o.kt)("p",null,"Positioned columns specify their content, column index (along the grid row) and alignment:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"/** A positionable FMC column. */\nexport type PositionedFmcColumn = [\n  /** The content, either a string or an FmcComponent. */\n  content: string | FmcComponent,\n  /** The (zero-indexed) index on which the first character is placed (or the last, if right-aligned). */\n  columnIndex: number,\n  /** If 'left', the text will continue to the right of the `columnIndex`.\n   * If 'right', the text will continue to the left of the `columnIndex`. */\n  alignment?: \"left\" | \"right\"\n];\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'[\n  ["MENU"],\n  // ...\n  [\n    ["A", 0, "right"],\n    ["B", 12, "left"],\n    ["C", 20, "right"],\n  ],\n  // ...\n];\n')),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Positioned Column Example",src:n(7982).Z,width:"300",height:"314"})),(0,o.kt)("h4",{id:"leftrightcenter-fixed-columns"},"Left/Right/Center fixed columns"),(0,o.kt)("p",null,"If plain columns without positioning are specified, you can list up to 3 values. Those are then automatically aligned, in order, to the left, right and center of the row."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'[\n  ["MENU"],\n  // ...\n  ["A", "B", "C"],\n  // ...\n];\n')),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Fixed Column Example",src:n(65725).Z,width:"300",height:"313"})),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"It is not recommended to use the center alignment (third column) when not specifying positions. It is imprecise in nature and is only present for legacy reasons.")),(0,o.kt)("h4",{id:"a-mix-of-both"},"A mix of both"),(0,o.kt)("p",null,"You can mix the two layouts, ",(0,o.kt)("strong",{parentName:"p"},"but you must specify every positioned column last"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'[\n  ["MENU"],\n  // ...\n  ["A", ["B", 12, "left"], ["C", 20, "right"]], // Valid\n  [["A", 0, "right"], "B", ["C", 20, "right"]], // Invalid\n  // ...\n];\n')),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Mixed Column Example",src:n(29426).Z,width:"300",height:"314"})),(0,o.kt)("h3",{id:"template-columns"},"Template columns"),(0,o.kt)("p",null,"Template columns (individual elements in each row array) can be one of three values:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"a raw string value, which renders the literal contents of the string (with ",(0,o.kt)("a",{parentName:"li",href:"#"},"style tags")," taken into account);"),(0,o.kt)("li",{parentName:"ul"},"an instance of a component;"),(0,o.kt)("li",{parentName:"ul"},"a positioned column (see ",(0,o.kt)("a",{parentName:"li",href:"#positioned-columns"},"Positioned columns"),") containing both a column index and one of the two values above.")),(0,o.kt)("h2",{id:"template-sub-pages"},"Template sub pages"),(0,o.kt)("p",null,"A page can also contain sub pages. Where you wish to define a subpage, you can do this by creating another sub-array within the FmcTemplate. This would look similar to the below template:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'[\n  // Page 1\n  [\n    ["PAGE 1"], \n    ["A", "B", "C"]\n  ],\n  // Page 2\n  [\n    ["PAGE 2"], \n    ["D", "E", "F"]\n  ],\n];\n')),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Subpages should only be used for pages which are accessed through scrolling. When the screen receives a scrolling event, it will automatically move to the next/last subpage.")))}u.isMDXComponent=!0},65725:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/fixed-column-example-7628058dc841c7aa1bc94033bd27d7d9.png"},29426:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/mixed-column-example-e863f00c62714f14856f951faaa74ca9.png"},7982:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/positioned-column-example-4a4e0ae9e3ef5fa246b20cfee187b81c.png"}}]);