"use strict";(self.webpackChunkdocs_api=self.webpackChunkdocs_api||[]).push([[17574],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),d=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=d(e.components);return i.createElement(l.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=d(n),c=r,f=m["".concat(l,".").concat(c)]||m[c]||u[c]||a;return n?i.createElement(f,o(o({ref:t},p),{},{components:n})):i.createElement(f,o({ref:t},p))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:r,o[1]=s;for(var d=2;d<a;d++)o[d]=n[d];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},501:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var i=n(87462),r=(n(67294),n(3905));const a={sidebar_label:"MFD Plugins",sidebar_position:6},o="WT21 MFD Plugins",s={unversionedId:"wt21/mfd-plugins",id:"wt21/mfd-plugins",title:"WT21 MFD Plugins",description:"Introduction",source:"@site/docs/wt21/mfd-plugins.md",sourceDirName:"wt21",slug:"/wt21/mfd-plugins",permalink:"/msfs-avionics-mirror/docs/wt21/mfd-plugins",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_label:"MFD Plugins",sidebar_position:6},sidebar:"sidebar",previous:{title:"PFD Plugins",permalink:"/msfs-avionics-mirror/docs/wt21/pfd-plugins"},next:{title:"FMC Plugins",permalink:"/msfs-avionics-mirror/docs/wt21/fmc-plugins"}},l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Importing Libraries",id:"importing-libraries",level:2},{value:"Binder",id:"binder",level:2},{value:"EIS",id:"eis",level:2},{value:"System Pages",id:"system-pages",level:2},{value:"Text Pages",id:"text-pages",level:2},{value:"MfdTextPageComponent",id:"mfdtextpagecomponent",level:3}],p={toc:d},m="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"wt21-mfd-plugins"},"WT21 MFD Plugins"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"WT21 MFD plugins allow you to render the EIS, render systems pages and implement additional text pages. MFD plugins must implement the ",(0,r.kt)("a",{parentName:"p",href:"/docs/wt21mfd/classes/WT21MfdAvionicsPlugin"},(0,r.kt)("inlineCode",{parentName:"a"},"WT21MfdAvionicsPlugin"))," interface."),(0,r.kt)("h2",{id:"importing-libraries"},"Importing Libraries"),(0,r.kt)("p",null,"MFD plugins can import and use code from the following framework libraries:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@microsoft/msfs-sdk")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@microsoft/msfs-wt21-shared")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@microsoft/msfs-wt21-mfd"))),(0,r.kt)("p",null,"When building your plugin, you should configure your build tools to consume the above libraries as global externals."),(0,r.kt)("h2",{id:"binder"},"Binder"),(0,r.kt)("p",null,"In addition to the ",(0,r.kt)("a",{parentName:"p",href:"/msfs-avionics-mirror/docs/wt21/plugin-basics#plugin-interface"},"references")," passed to all WT21 plugins, MFD plugins are given the following additional references through ",(0,r.kt)("inlineCode",{parentName:"p"},"binder"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The display unit index")),(0,r.kt)("h2",{id:"eis"},"EIS"),(0,r.kt)("p",null,"The EIS (engine indication system) display is located on the top of the MFD. EIS displays on the WT21 are highly aircraft-specific; therefore the base WT21 does not render any part of the EIS. ",(0,r.kt)("strong",{parentName:"p"},"The EIS must be rendered by an MFD plugin"),"."),(0,r.kt)("p",null,"A plugin can render the EIS using the ",(0,r.kt)("inlineCode",{parentName:"p"},"renderEis()")," method. This method is called during initialization of the MFD after ",(0,r.kt)("inlineCode",{parentName:"p"},"onInstall()"),". Once an EIS is rendered by any plugin (by returning a non-null ",(0,r.kt)("inlineCode",{parentName:"p"},"VNode")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"renderEis()"),"), the ",(0,r.kt)("inlineCode",{parentName:"p"},"renderEis()")," methods of all subsequent plugins will be ignored."),(0,r.kt)("p",null,"The size of the area allocated to the EIS is 772px in width and 460px in height."),(0,r.kt)("h2",{id:"system-pages"},"System Pages"),(0,r.kt)("p",null,"The MFD is able to render system pages which will be shown on the bottom of the screen when the SYS key has been depressed. These displays are highly aircraft-specific and therefore the base WT21 doesn't render any system pages."),(0,r.kt)("p",null,"A plugin can render systems pages using the ",(0,r.kt)("inlineCode",{parentName:"p"},"renderSystemPages()")," method. This method is called during initialization of the MFD after ",(0,r.kt)("inlineCode",{parentName:"p"},"onInstall()"),". Systems pages can be rendered by any plugin (by returning an ",(0,r.kt)("strong",{parentName:"p"},"array")," of ",(0,r.kt)("a",{parentName:"p",href:"/docs/wt21mfd/interfaces/WT21MfdPluginSystemsPageDefinition"},(0,r.kt)("inlineCode",{parentName:"a"},"WT21MfdPluginSystemsPageDefinition"),"s")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"renderSystemPages()"),"), and multiple plugins can be responsible for rendering systems pages, however the order in which they are displayed may not be consistent."),(0,r.kt)("h2",{id:"text-pages"},"Text Pages"),(0,r.kt)("p",null,"The MFD can also render text pages, these text pages can be accessed through the DISPL MENU button on the FMC, or the MFD DATA button. These text pages allow for custom pages to be shown on the MFD, such as in the case of the CJ4 where they are used to render takeoff and approach performance data onto the FMC."),(0,r.kt)("p",null,"To render a text page the ",(0,r.kt)("inlineCode",{parentName:"p"},"registerExtraMfdTextPages(context)")," method must be used. This method is called during initialization of the MFD after ",(0,r.kt)("inlineCode",{parentName:"p"},"onInstall()"),". It has one parameter, of type ",(0,r.kt)("a",{parentName:"p",href:"/docs/wt21mfd/interfaces/MfdTextPagesContext"},(0,r.kt)("inlineCode",{parentName:"a"},"MfdTextPagesContext")),"."),(0,r.kt)("p",null,"Inside of this function, you then call ",(0,r.kt)("inlineCode",{parentName:"p"},"context.addTextPage(key, render)"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"where ",(0,r.kt)("inlineCode",{parentName:"li"},"key")," is an enum ",(0,r.kt)("a",{parentName:"li",href:"/docs/wt21shared/enums/Wt21MfdTextPage"},(0,r.kt)("inlineCode",{parentName:"a"},"Wt21MfdTextPage")),"; and"),(0,r.kt)("li",{parentName:"ul"},"where ",(0,r.kt)("inlineCode",{parentName:"li"},"render")," is an arrow function (",(0,r.kt)("inlineCode",{parentName:"li"},"(ref) => MfdTextPageComponent"),") returning a component extended from ",(0,r.kt)("a",{parentName:"li",href:"/docs/wt21mfd/classes/MfdTextPageComponent"},(0,r.kt)("inlineCode",{parentName:"a"},"MfdTextPageComponent")),". ",(0,r.kt)("inlineCode",{parentName:"li"},"ref")," is a ",(0,r.kt)("inlineCode",{parentName:"li"},"NodeReference")," for the relevant page.")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"registerExtraMfdTextPages(context: MfdTextPagesContext): void {\n  context.addTextPage(WT21MfdTextPage.TakeoffRef, (ref) => {\n    // TORefPage is a class extended from MfdTextPageComponent\n    return <TORefPage\n      ref={ref}\n      bus={this.binder.bus}\n      mfdIndex={this.binder.displayUnitIndex}\n    />;\n  });\n}\n")),(0,r.kt)("h3",{id:"mfdtextpagecomponent"},"MfdTextPageComponent"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/docs/wt21mfd/classes/MfdTextPageComponent"},(0,r.kt)("inlineCode",{parentName:"a"},"MfdTextPageComponent"))," is extended from ",(0,r.kt)("a",{parentName:"p",href:"/docs/framework/classes/DisplayComponent"},(0,r.kt)("inlineCode",{parentName:"a"},"DisplayComponent")),", and provides a basic set of functions and properties.\nThe component provides functions for showing and hiding the page which can be overwritten to provide additional functionality. In addition, it also provides a Subject ",(0,r.kt)("inlineCode",{parentName:"p"},"shownSub")," which controls the page visibility."),(0,r.kt)("p",null,"When rendering your component, the base div should use the ref ",(0,r.kt)("inlineCode",{parentName:"p"},"pageContainerDivRef")," inherited from the text page component, ensuring that visibility of the page is properly handled."))}u.isMDXComponent=!0}}]);