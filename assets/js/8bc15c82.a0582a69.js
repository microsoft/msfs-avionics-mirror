"use strict";(self.webpackChunkdocs_api=self.webpackChunkdocs_api||[]).push([[75197],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),p=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,h=u["".concat(l,".").concat(m)]||u[m]||c[m]||r;return n?i.createElement(h,o(o({ref:t},d),{},{components:n})):i.createElement(h,o({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},446:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var i=n(87462),a=(n(67294),n(3905));const r={sidebar_label:"MFD Plugins",sidebar_position:7},o="G3000 MFD Plugins",s={unversionedId:"g3000/mfd-plugins",id:"g3000/mfd-plugins",title:"G3000 MFD Plugins",description:"Introduction",source:"@site/docs/g3000/mfd-plugins.md",sourceDirName:"g3000",slug:"/g3000/mfd-plugins",permalink:"/msfs-avionics-mirror/docs/g3000/mfd-plugins",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_label:"MFD Plugins",sidebar_position:7},sidebar:"sidebar",previous:{title:"PFD Plugins",permalink:"/msfs-avionics-mirror/docs/g3000/pfd-plugins"},next:{title:"GTC Plugins",permalink:"/msfs-avionics-mirror/docs/g3000/gtc-plugins"}},l={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Importing Libraries",id:"importing-libraries",level:2},{value:"Binder",id:"binder",level:2},{value:"EIS",id:"eis",level:2},{value:"Display Panes",id:"display-panes",level:2},{value:"Takeoff/Landing (TOLD) Performance",id:"takeofflanding-told-performance",level:2},{value:"Persistent User Settings",id:"persistent-user-settings",level:2},{value:"Startup Screen Rows",id:"startup-screen-rows",level:2}],d={toc:p},u="wrapper";function c(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,i.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"g3000-mfd-plugins"},"G3000 MFD Plugins"),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"G3000 MFD plugins allow you to render the EIS, register display panes to the MFD, implement takeoff/landing (TOLD) performance calculations, and define user settings that should be saved between flights in addition to the ones already managed by the base G3000. MFD plugins must implement the ",(0,a.kt)("inlineCode",{parentName:"p"},"G3000MfdPlugin")," interface."),(0,a.kt)("p",null,"For convenience, you may elect to have MFD plugins extend the ",(0,a.kt)("inlineCode",{parentName:"p"},"AbstractG3000MfdPlugin")," abstract class. This class defines no-op versions of all methods required by the MFD plugin interface. Simply override the methods required for the functionality you wish to add without having to worry about the others."),(0,a.kt)("h2",{id:"importing-libraries"},"Importing Libraries"),(0,a.kt)("p",null,"MFD plugins can import and use code from the following framework libraries:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@microsoft/msfs-sdk")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@microsoft/msfs-garminsdk")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@microsoft/msfs-wtg3000-common")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@microsoft/msfs-wtg3000-mfd"))),(0,a.kt)("p",null,"When building your plugin, you should configure your build tools to consume the above libraries as global externals."),(0,a.kt)("h2",{id:"binder"},"Binder"),(0,a.kt)("p",null,"In addition to the ",(0,a.kt)("a",{parentName:"p",href:"/msfs-avionics-mirror/docs/g3000/plugin-basics#plugin-interface"},"references")," passed to all G3000 plugins, MFD plugins are given the following additional references through ",(0,a.kt)("inlineCode",{parentName:"p"},"binder"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The instrument configuration object specific to the MFD instance."),(0,a.kt)("li",{parentName:"ul"},"The flight plan store."),(0,a.kt)("li",{parentName:"ul"},"The CAS system.")),(0,a.kt)("h2",{id:"eis"},"EIS"),(0,a.kt)("p",null,"The EIS (engine indication system) display is located on the left side of the MFD. EIS displays on the G3000 are highly aircraft-specific; therefore the base G3000 does not render any part of the EIS. ",(0,a.kt)("strong",{parentName:"p"},"The EIS must be rendered by an MFD plugin"),"."),(0,a.kt)("p",null,"A plugin can render the EIS using the ",(0,a.kt)("inlineCode",{parentName:"p"},"renderEis()")," method. This method is called during initialization of the MFD after ",(0,a.kt)("inlineCode",{parentName:"p"},"onInstall()")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"onInit()"),". Once an EIS is rendered by any plugin (by returning a non-null ",(0,a.kt)("inlineCode",{parentName:"p"},"VNode")," from ",(0,a.kt)("inlineCode",{parentName:"p"},"renderEis()"),"), the ",(0,a.kt)("inlineCode",{parentName:"p"},"renderEis()")," methods of all subsequent plugins will be ignored."),(0,a.kt)("p",null,"The size of the area allocated to the EIS is 280px in width and 800px in height."),(0,a.kt)("h2",{id:"display-panes"},"Display Panes"),(0,a.kt)("p",null,"The G3000 MFD supports two display panes. Either MFD pane can be displayed as full-size in MFD Full mode, or both can be displayed as half-size in MFD Half mode. For more information on display panes, please refer to the ",(0,a.kt)("a",{parentName:"p",href:"/msfs-avionics-mirror/docs/g3000/display-panes"},(0,a.kt)("em",{parentName:"a"},"G3000 Display Panes"))," page."),(0,a.kt)("p",null,"You can register your own display pane views to be displayed on the MFD using the MFD plugin's ",(0,a.kt)("inlineCode",{parentName:"p"},"registerDisplayPaneViews()")," method. This method is guaranteed to be called ",(0,a.kt)("em",{parentName:"p"},"after")," the base G3000 has registered all of its display pane views. Therefore, you may replace views registered by the base G3000 by registering your own view under the same key."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"The MFD half-size display panes do not have the same dimensions as the PFD half-size display pane. The MFD version is slightly smaller in both dimensions (495px by 748px vs. 508px by 778px). Keep this in mind when designing panes that can appear on both the MFD and PFD.")),(0,a.kt)("h2",{id:"takeofflanding-told-performance"},"Takeoff/Landing (TOLD) Performance"),(0,a.kt)("p",null,"The G3000 supports optional takeoff/landing (TOLD) performance calculations. TOLD calculations provide performance-based runway length required and V-speed numbers."),(0,a.kt)("p",null,"To implement the TOLD option, two things must be done. First, in ",(0,a.kt)("inlineCode",{parentName:"p"},"panel.xml"),", the ",(0,a.kt)("a",{parentName:"p",href:"panel-xml-tag-documentation#told"},(0,a.kt)("inlineCode",{parentName:"a"},"<TOLD>"))," tag must be defined. Second, at least one MFD plugin must return a valid ",(0,a.kt)("inlineCode",{parentName:"p"},"ToldModule")," from the ",(0,a.kt)("inlineCode",{parentName:"p"},"getToldModule()")," method."),(0,a.kt)("h2",{id:"persistent-user-settings"},"Persistent User Settings"),(0,a.kt)("p",null,"You can define user settings whose values should be saved across flights using the MFD plugin's ",(0,a.kt)("inlineCode",{parentName:"p"},"getPersistentSettings()")," method. Settings marked as persistent in this manner will be saved via the MSFS ",(0,a.kt)("inlineCode",{parentName:"p"},"DataStore")," API to the user's cloud save file. Saved settings are loaded during MFD initialization when loading a new flight. Persistent settings are saved on a per-aircraft basis (determined by the airplane's ATC_MODEL)."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"A new cloud save data key is generated and written for each persistent user setting ",(0,a.kt)("em",{parentName:"p"},"per aircraft")," as soon as the MFD initializes after loading a flight. Currently there is no mechanism by which you can remove data keys from cloud save files. This means that once a key is added to a cloud save, it can never be removed."),(0,a.kt)("p",{parentName:"admonition"},'As such, it is highly recommended that you finalize the names of all would-be persistent user settings before allowing them to be saved. This will help to minimize the number of "junk" keys written to the cloud saves of anybody running your plugin code.')),(0,a.kt)("h2",{id:"startup-screen-rows"},"Startup Screen Rows"),(0,a.kt)("p",null,"If your airplane displays the MFD startup screen (as ",(0,a.kt)("a",{parentName:"p",href:"panel-xml-tag-documentation#startupscreen"},"configured")," in ",(0,a.kt)("inlineCode",{parentName:"p"},"panel.xml"),"), you can customize the data rows which appear on the right side using the MFD plugin's ",(0,a.kt)("inlineCode",{parentName:"p"},"getStartupScreenRows()")," method. If ",(0,a.kt)("inlineCode",{parentName:"p"},"getStartupScreenRows()")," returns a non-",(0,a.kt)("inlineCode",{parentName:"p"},"null")," value, then the returned array will override the default rows. Up to eleven rows can be rendered."),(0,a.kt)("p",null,"For each row, the array returned by ",(0,a.kt)("inlineCode",{parentName:"p"},"getStartupScreenRows()")," can specify either a member of the ",(0,a.kt)("inlineCode",{parentName:"p"},"StartupScreenPrebuiltRow")," enum to render one of the pre-defined rows or a row factory to render a custom row. A row factory is a function which returns a ",(0,a.kt)("inlineCode",{parentName:"p"},"StartupScreenRowDefinition")," object that describes the custom row to render. Each row consists of a static icon, a static title, and a static or dynamic value. Additionally, the row may be displayed in an optional caution state in which the title and value are colored amber instead of white."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"When using custom image assets for row icons, the assets should have dimensions 30px (W) by 30px (H).")),(0,a.kt)("p",null,"The following image shows an example of two startup screen rows, with the icon, title, and value labeled. The second row is displayed in the caution state."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"MFD Startup Screen Rows",src:n(73203).Z,width:"412",height:"203"})))}c.isMDXComponent=!0},73203:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/mfd-startup-screen-rows-d0867f87e1461dd9d38a705947014728.jpg"}}]);